<!DOCTYPE html>
<html lang="zh-Hans">

<!-- Head tag -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->
    
        <meta name="description" content="åŒºå—é“¾æ˜¯ä¸€ç§åŒºä¸­å¿ƒåŒ–ã€ä¸å¯ç¯¡æ”¹çš„åˆ†å¸ƒå¼è´¦æœ¬ã€‚
äº†è§£åŒºå—é“¾çš„æ„æˆä»¥åŠåŸºæœ¬çš„åŸç†å¯¹äºåˆå­¦è€…éå¸¸é‡è¦ã€‚æœ¬æ–‡å°†ä½¿ç”¨Javaè¯­è¨€æ­å»ºæœ€ç®€å•çš„åŒºå—é“¾åŸå‹ã€‚
åŒºå—å»ºç«‹Blockç±»ï¼Œå…·æœ‰ä»¥ä¸‹å±æ€§ï¼š
1234private String mTimestamp;private String mPrevBlockHas">
    

    <!--Author-->
    
        <meta name="author" content="Dragon">
    

    <!-- Title -->
    
    <title>ä¸‰åˆ†é’Ÿæ­å»ºä¸€ä¸ªç®€æ˜“çš„åŒºå—é“¾åŸå‹ | Dragonçš„åšå®¢</title>

    <!-- Bootstrap Core CSS -->
    <link href="//cdn.bootcss.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/style.css">

    <!-- Custom Fonts -->
    <link href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Noto+Serif:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

<body>

    <!-- Content -->
    <section class="article-container">
<!-- Back Home -->
<a class="nav-back" href="/">
    <i class="fa fa-puzzle-piece"></i>
</a>

<!-- Page Header -->
<header class="intro-header">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <h1>ä¸‰åˆ†é’Ÿæ­å»ºä¸€ä¸ªç®€æ˜“çš„åŒºå—é“¾åŸå‹</h1>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">
            <!-- Post Main Content -->
            <div class="post-content col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <p><a href="https://baike.baidu.com/item/åŒºå—é“¾/13465666?fr=aladdin" target="_blank" rel="external">åŒºå—é“¾</a>æ˜¯ä¸€ç§åŒºä¸­å¿ƒåŒ–ã€ä¸å¯ç¯¡æ”¹çš„åˆ†å¸ƒå¼è´¦æœ¬ã€‚</p>
<p>äº†è§£åŒºå—é“¾çš„æ„æˆä»¥åŠåŸºæœ¬çš„åŸç†å¯¹äºåˆå­¦è€…éå¸¸é‡è¦ã€‚æœ¬æ–‡å°†ä½¿ç”¨Javaè¯­è¨€æ­å»ºæœ€ç®€å•çš„åŒºå—é“¾åŸå‹ã€‚</p>
<h2 id="åŒºå—"><a href="#åŒºå—" class="headerlink" title="åŒºå—"></a>åŒºå—</h2><p>å»ºç«‹Blockç±»ï¼Œå…·æœ‰ä»¥ä¸‹å±æ€§ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> String mTimestamp;</div><div class="line"><span class="keyword">private</span> String mPrevBlockHash;</div><div class="line"><span class="keyword">private</span> String mHash;</div><div class="line"><span class="keyword">private</span> String mData;</div></pre></td></tr></table></figure>
<ul>
<li><code>mTimestamp</code> æ—¶é—´æˆ³ï¼Œè¡¨ç¤ºå½“å‰åŒºå—åˆ›å»ºæ—¶çš„æ—¶é—´</li>
<li><code>mPrevBlockHash</code>å‰ä¸€å—åŒºå—çš„hash</li>
<li><code>mData</code> å½“å‰åŒºå—æ‰€ä¿å­˜çš„ä¿¡æ¯</li>
<li><code>mHash</code> å½“å‰åŒºå—çš„hashï¼ˆå½“å‰åŒºå—æ‰€æœ‰ä¿¡æ¯æ‹¼æ¥åäº§ç”Ÿçš„hashï¼‰</li>
</ul>
<p>åœ¨åˆå§‹åŒ–åŒºå—æ—¶éœ€è¦å‰ä¸€å—åŒºå—çš„Hashå’Œdata<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="title">Block</span><span class="params">(String data, String prehash)</span> </span>&#123;</div><div class="line">       <span class="keyword">this</span>.mData = data;</div><div class="line">       <span class="keyword">this</span>.mPrevBlockHash = prehash;</div><div class="line">       <span class="keyword">this</span>.setHash();</div><div class="line">   &#125;</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">setHash</span><span class="params">()</span> </span>&#123;</div><div class="line">       SimpleDateFormat df = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-MM-dd HH:mm:ss"</span>);<span class="comment">//è®¾ç½®æ—¥æœŸæ ¼å¼</span></div><div class="line">       mTimestamp = df.format(<span class="keyword">new</span> Date());</div><div class="line">       String headers = mTimestamp + mPrevBlockHash + mData;</div><div class="line">       mHash = block.SHA(headers, <span class="string">"SHA-256"</span>);</div><div class="line"></div><div class="line">   &#125;</div></pre></td></tr></table></figure></p>
<h2 id="Hash"><a href="#Hash" class="headerlink" title="Hash"></a>Hash</h2><p>åœ¨Javaä¸­å¦‚ä½•è®¡ç®—SHA-256å€¼å‘¢ï¼Ÿ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">SHA</span><span class="params">(<span class="keyword">final</span> String strText, <span class="keyword">final</span> String strType)</span> </span>&#123;</div><div class="line">        <span class="comment">// è¿”å›å€¼</span></div><div class="line">        String strResult = <span class="keyword">null</span>;</div><div class="line">        <span class="comment">// æ˜¯å¦æ˜¯æœ‰æ•ˆå­—ç¬¦ä¸²</span></div><div class="line">        <span class="keyword">if</span> (strText != <span class="keyword">null</span> &amp;&amp; strText.length() &gt; <span class="number">0</span>) &#123;</div><div class="line">            <span class="keyword">try</span> &#123;</div><div class="line">                <span class="comment">// SHA åŠ å¯†å¼€å§‹</span></div><div class="line">                <span class="comment">// åˆ›å»ºåŠ å¯†å¯¹è±¡ å¹¶å‚³å…¥åŠ å¯†é¡å‹</span></div><div class="line">                MessageDigest messageDigest = MessageDigest.getInstance(strType);</div><div class="line">                <span class="comment">// ä¼ å…¥è¦åŠ å¯†çš„å­—ç¬¦ä¸²</span></div><div class="line">                messageDigest.update(strText.getBytes());</div><div class="line">                <span class="comment">// å¾—åˆ° byte é¡å‹ç»“æœ</span></div><div class="line">                <span class="keyword">byte</span> byteBuffer[] = messageDigest.digest();</div><div class="line"></div><div class="line">                <span class="comment">// å°‡ byte è½‰æ›çˆ² string</span></div><div class="line">                StringBuffer strHexString = <span class="keyword">new</span> StringBuffer();</div><div class="line">                <span class="comment">// éæ­· byte buffer</span></div><div class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; byteBuffer.length; i++) &#123;</div><div class="line">                    String hex = Integer.toHexString(<span class="number">0xff</span> &amp; byteBuffer[i]);</div><div class="line">                    <span class="keyword">if</span> (hex.length() == <span class="number">1</span>) &#123;</div><div class="line">                        strHexString.append(<span class="string">'0'</span>);</div><div class="line">                    &#125;</div><div class="line">                    strHexString.append(hex);</div><div class="line">                &#125;</div><div class="line">                <span class="comment">// å¾—åˆ°è¿”å›çµæœ</span></div><div class="line">                strResult = strHexString.toString();</div><div class="line">            &#125; <span class="keyword">catch</span> (NoSuchAlgorithmException e) &#123;</div><div class="line">                e.printStackTrace();</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> strResult;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬ä½¿ç”¨ä»¥åŠå†™å¥½çš„æ–¹æ³•å…·ä½“çš„åŸç†å°±è¯·å¤§å®¶è‡ªè¡Œæœç´¢å­¦ä¹ äº†ã€‚</p>
<h3 id="åŒºå—é“¾"><a href="#åŒºå—é“¾" class="headerlink" title="åŒºå—é“¾"></a>åŒºå—é“¾</h3><p>åŒºå—é“¾æ˜¯ç”±åŒºå—ä¸åŒºå—â€˜è¿æ¥â€™è€Œæˆçš„ï¼Œå¦‚ä½•å°†åŒºå—è¿æ¥èµ·æ¥å‘¢ï¼Ÿ</p>
<p>å»ºç«‹ä¸€ä¸ªBlockchainç±»<br>æˆ‘ä»¬éœ€è¦ä¸€ä¸ªä¸“é—¨å­˜æ”¾è‹¥å¹²åŒºå—çš„è½½ä½“List<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span>  <span class="keyword">static</span> List&lt;Block&gt; blockChain;</div></pre></td></tr></table></figure></p>
<p>æ·»åŠ ä¸€ä¸ªæ–°çš„åŒºå—<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">addBlock</span><span class="params">(String data)</span> </span>&#123;</div><div class="line">      Block preBlock = blockChain.get(blockChain.size() - <span class="number">1</span>);</div><div class="line">      Block newBlock = <span class="keyword">new</span> Block(data, preBlock.getmHash());</div><div class="line">      blockChain.add(newBlock);</div><div class="line">  &#125;</div></pre></td></tr></table></figure></p>
<p>å°†å‰ä¸€åŒºå—çš„hashå–å‡ºï¼Œåˆ›å»ºæ–°çš„åŒºå—å¹¶åŠ å…¥åˆ°Listä¸­</p>
<p>åˆ›å»ºåˆ›ä¸–å—<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> block <span class="title">newGenesisBlock</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> block(<span class="string">"Genesis"</span>, <span class="string">"0"</span>);</div><div class="line">    &#125;</div></pre></td></tr></table></figure></p>
<p>åˆ›å»ºåŒºå—é“¾<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">newBlockchain</span><span class="params">()</span> </span>&#123;</div><div class="line">       blockChain = <span class="keyword">new</span> ArrayList&lt;block&gt;();</div><div class="line">       blockChain.add(<span class="keyword">this</span>.newGenesisBlock());</div><div class="line">   &#125;</div></pre></td></tr></table></figure></p>
<p>ç¼–å†™æµ‹è¯•ç±»<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">        BlockChain.newBlockchain();</div><div class="line">        BlockChain.addBlock(<span class="string">"tom"</span>);</div><div class="line">        BlockChain.addBlock(<span class="string">"jack"</span>);</div><div class="line">        BlockChain.addBlock(<span class="string">"jerry"</span>);</div><div class="line"></div><div class="line"></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; BlockChain.blockChain.size(); i++) &#123;</div><div class="line">            Block b = BlockChain.blockChain.get(i);</div><div class="line">            System.out.println(<span class="string">"|-----------------------------------|"</span>);</div><div class="line">            System.out.println(<span class="string">"åŒºå—ç¼–å·ï¼š"</span> + i);</div><div class="line">            System.out.println(<span class="string">"æ—¶é—´ï¼š"</span> + b.getmTimestamp());</div><div class="line">            System.out.println(<span class="string">"æ•°æ®ï¼š"</span> + b.getmData());</div><div class="line">            System.out.println(<span class="string">"çˆ¶Hashï¼š"</span> + b.getmPrevBlockHash());</div><div class="line">            System.out.println(<span class="string">"Hashï¼š"</span> + b.getmHash());</div><div class="line"></div><div class="line">        &#125;</div><div class="line">        System.out.print(<span class="string">"|-----------------------------------|"</span>);</div><div class="line"></div><div class="line"></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>è¿è¡Œç»“æœï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">|-----------------------------------|</div><div class="line">åŒºå—ç¼–å·ï¼š0</div><div class="line">æ—¶é—´ï¼š2017-10-25 23:26:55</div><div class="line">æ•°æ®ï¼šGenesis</div><div class="line">çˆ¶Hashï¼š0</div><div class="line">Hashï¼š7a708fe6c9c1038b313a83cc2deeea40f270ea7e6fb2ff0dfd981ef6f2e8ff2a</div><div class="line">|-----------------------------------|</div><div class="line">åŒºå—ç¼–å·ï¼š1</div><div class="line">æ—¶é—´ï¼š2017-10-25 23:26:55</div><div class="line">æ•°æ®ï¼štom</div><div class="line">çˆ¶Hashï¼š7a708fe6c9c1038b313a83cc2deeea40f270ea7e6fb2ff0dfd981ef6f2e8ff2a</div><div class="line">Hashï¼š481abd2e8797fbe4ef0eaf02aaf4952d4d68366cab9204a60c6f635c61b88ce6</div><div class="line">|-----------------------------------|</div><div class="line">åŒºå—ç¼–å·ï¼š2</div><div class="line">æ—¶é—´ï¼š2017-10-25 23:26:55</div><div class="line">æ•°æ®ï¼šjack</div><div class="line">çˆ¶Hashï¼š481abd2e8797fbe4ef0eaf02aaf4952d4d68366cab9204a60c6f635c61b88ce6</div><div class="line">Hashï¼šbab85541ab30bec07c765b23d55c69522b09b9d3ab1aed0a7ebbee258f123a61</div><div class="line">|-----------------------------------|</div><div class="line">åŒºå—ç¼–å·ï¼š3</div><div class="line">æ—¶é—´ï¼š2017-10-25 23:26:55</div><div class="line">æ•°æ®ï¼šjerry</div><div class="line">çˆ¶Hashï¼šbab85541ab30bec07c765b23d55c69522b09b9d3ab1aed0a7ebbee258f123a61</div><div class="line">Hashï¼š4dc6075449d753c3101e8d08aaee731cf9bea48d7c2fa24195ebb58ad4a988d7</div><div class="line">|-----------------------------------|</div></pre></td></tr></table></figure></p>
<p>ä¸åˆ°ä¸‰åˆ†é’Ÿä¸€ä¸ªæœ€ç®€å•çš„åŒºå—é“¾åŸå‹å°±æ­å»ºå¥½äº†ã€‚</p>

 
                <!-- Meta -->
                <div class="post-meta">
                    <hr>
                    <br>
                    <div class="post-tags">
                        
                    </div>
                    <div class="post-date">
                        2017 å¹´ 10 æœˆ 25 æ—¥
                    </div>
                </div>
            </div>

            <!-- Comments -->
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <!-- Disqus Comments -->


            </div>
        </div>
    </div>
</article>
</section>

    <!-- Scripts -->
    <!-- jQuery -->
<script src="//cdn.bootcss.com/jquery/2.2.1/jquery.min.js"></script>
<!-- Bootstrap -->
<script src="//cdn.bootcss.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

<script type="text/javascript">
	console.log('Hexo-theme-hollow designed by zchen9 ğŸ™‹ Â© 2015-' + (new Date()).getFullYear());
</script>

    <!-- Google Analytics -->
    

</body>

</html>