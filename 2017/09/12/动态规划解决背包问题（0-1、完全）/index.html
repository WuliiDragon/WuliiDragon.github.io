<!DOCTYPE html>
<html lang="zh-Hans">

<!-- Head tag -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->
    
        <meta name="description" content="0-1背包问题
0~1背包（ZeroOnePack）: 有n件物品和一个容量为V的背包。（每种物品均只有一件）第i件物品的体积是volume[i]，价值是value[i]。求解将哪些物品装入背包可使价值总和最大。

0-1背包问题的特点: 每个物品只有两种状态 装 与 不装在考虑当前第 i 个物品时">
    

    <!--Author-->
    
        <meta name="author" content="Dragon">
    

    <!-- Title -->
    
    <title>动态规划解决背包问题（0-1、完全） | Dragon的博客</title>

    <!-- Bootstrap Core CSS -->
    <link href="//cdn.bootcss.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/style.css">

    <!-- Custom Fonts -->
    <link href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Noto+Serif:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

<body>

    <!-- Content -->
    <section class="article-container">
<!-- Back Home -->
<a class="nav-back" href="/">
    <i class="fa fa-home fa-3x"></i>
</a>

<!-- Page Header -->
<header class="intro-header">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <h1>动态规划解决背包问题（0-1、完全）</h1>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">
            <!-- Post Main Content -->
            <div class="post-content col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <h3 id="0-1背包问题"><a href="#0-1背包问题" class="headerlink" title="0-1背包问题"></a>0-1背包问题</h3><blockquote>
<p>0~1背包（ZeroOnePack）: 有n件物品和一个容量为V的背包。（每种物品均只有一件）第i件物品的体积是volume[i]，价值是value[i]。求解将哪些物品装入背包可使价值总和最大。</p>
</blockquote>
<p>0-1背包问题的特点: 每个物品只有两种状态 装 与 不装<br>在考虑当前第 i 个物品时，背包还剩 v 这么大的容量有可以有三个问题</p>
<ul>
<li>当前背包可以装下吗？</li>
<li>装进此物品背包里总价值是多少？</li>
<li>不装此物品背包里总价值是多少？</li>
</ul>
<p>我们肯定会选择能使背包价值最大的方式解决第 i 件物品。<br><code>f[i][v]</code>表示前 i 件物品恰放入一个容量为 v 的背包可以获得的最大价值</p>
<ul>
<li>放入第 i 件物品: <code>f[i - 1][v - volume[i]] + value[i]</code></li>
<li>不放入第 i 件物品: <code>f[i-1][v]</code></li>
</ul>
<p>状态方程：<code>f[i][v]=max{f[i - 1][v - volume[i]] + value[i], f[i-1][v]}</code></p>
<p>递推方法：<br><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> MAX 100</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> V 10</span></div><div class="line"><span class="keyword">int</span> value[MAX + <span class="number">1</span>]  = &#123;<span class="number">4</span>, <span class="number">8</span>, <span class="number">10</span>, <span class="number">1</span>&#125;;</div><div class="line"><span class="keyword">int</span> volume[MAX + <span class="number">1</span>] = &#123;<span class="number">2</span>, <span class="number">3</span>,  <span class="number">3</span>, <span class="number">1</span>&#125;,n = <span class="number">4</span>;</div><div class="line"><span class="keyword">int</span> F[MAX + <span class="number">1</span>][MAX + <span class="number">1</span>];</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">max</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> j)</span></span>&#123;</div><div class="line">    <span class="keyword">return</span> x &gt; j ? x : j;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">    <span class="keyword">int</span> i,j,l,s;</div><div class="line">    <span class="keyword">for</span>(i = <span class="number">1</span>;i &lt;= n;i++)&#123;</div><div class="line">        <span class="keyword">for</span> (j = <span class="number">1</span>; j &lt;= V; j++) &#123;<span class="comment">//i 和 j 从 1 开始但是value和 volume下标从0开始所以表达式有变化</span></div><div class="line">            <span class="keyword">if</span>(j &gt;= volume[i<span class="number">-1</span>])&#123;</div><div class="line">                F[i][j] = max(F[i<span class="number">-1</span>][j],F[i<span class="number">-1</span>][j - volume[i<span class="number">-1</span>]] + value[i<span class="number">-1</span>]);</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">else</span> F[i][j] = F[i<span class="number">-1</span>][j];</div><div class="line"></div><div class="line">            <span class="keyword">for</span>(l = <span class="number">1</span>;l &lt;= n;l++)&#123;<span class="comment">//输出看表的变化</span></div><div class="line">                <span class="keyword">for</span>(s = <span class="number">1</span>;s &lt;= V;s++)</div><div class="line">                    <span class="built_in">printf</span>(<span class="string">"%3d"</span>,F[l][s]);</div><div class="line">                <span class="built_in">printf</span>(<span class="string">"\n"</span>);</div><div class="line">            &#125;</div><div class="line">            <span class="built_in">printf</span>(<span class="string">"\n"</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>很直观的看到二维表的维护过程<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div></pre></td><td class="code"><pre><div class="line">0  0  0  0  0  0  0  0  0  0</div><div class="line">0  0  0  0  0  0  0  0  0  0</div><div class="line">0  0  0  0  0  0  0  0  0  0</div><div class="line">0  0  0  0  0  0  0  0  0  0</div><div class="line"></div><div class="line">0  4  0  0  0  0  0  0  0  0</div><div class="line">0  0  0  0  0  0  0  0  0  0</div><div class="line">0  0  0  0  0  0  0  0  0  0</div><div class="line">0  0  0  0  0  0  0  0  0  0</div><div class="line"></div><div class="line">0  4  4  0  0  0  0  0  0  0</div><div class="line">0  0  0  0  0  0  0  0  0  0</div><div class="line">0  0  0  0  0  0  0  0  0  0</div><div class="line">0  0  0  0  0  0  0  0  0  0</div><div class="line"></div><div class="line">0  4  4  4  0  0  0  0  0  0</div><div class="line">0  0  0  0  0  0  0  0  0  0</div><div class="line">0  0  0  0  0  0  0  0  0  0</div><div class="line">0  0  0  0  0  0  0  0  0  0</div><div class="line"></div><div class="line">0  4  4  4  4  0  0  0  0  0</div><div class="line">0  0  0  0  0  0  0  0  0  0</div><div class="line">0  0  0  0  0  0  0  0  0  0</div><div class="line">0  0  0  0  0  0  0  0  0  0</div><div class="line"></div><div class="line">0  4  4  4  4  4  0  0  0  0</div><div class="line">0  0  0  0  0  0  0  0  0  0</div><div class="line">0  0  0  0  0  0  0  0  0  0</div><div class="line">0  0  0  0  0  0  0  0  0  0</div><div class="line"></div><div class="line">0  4  4  4  4  4  4  0  0  0</div><div class="line">0  0  0  0  0  0  0  0  0  0</div><div class="line">0  0  0  0  0  0  0  0  0  0</div><div class="line">0  0  0  0  0  0  0  0  0  0</div><div class="line"></div><div class="line">0  4  4  4  4  4  4  4  0  0</div><div class="line">0  0  0  0  0  0  0  0  0  0</div><div class="line">0  0  0  0  0  0  0  0  0  0</div><div class="line">0  0  0  0  0  0  0  0  0  0</div><div class="line"></div><div class="line">0  4  4  4  4  4  4  4  4  0</div><div class="line">0  0  0  0  0  0  0  0  0  0</div><div class="line">0  0  0  0  0  0  0  0  0  0</div><div class="line">0  0  0  0  0  0  0  0  0  0</div><div class="line"></div><div class="line">0  4  4  4  4  4  4  4  4  4</div><div class="line">0  0  0  0  0  0  0  0  0  0</div><div class="line">0  0  0  0  0  0  0  0  0  0</div><div class="line">0  0  0  0  0  0  0  0  0  0</div><div class="line"></div><div class="line">0  4  4  4  4  4  4  4  4  4</div><div class="line">0  0  0  0  0  0  0  0  0  0</div><div class="line">0  0  0  0  0  0  0  0  0  0</div><div class="line">0  0  0  0  0  0  0  0  0  0</div><div class="line"></div><div class="line">0  4  4  4  4  4  4  4  4  4</div><div class="line">0  4  0  0  0  0  0  0  0  0</div><div class="line">0  0  0  0  0  0  0  0  0  0</div><div class="line">0  0  0  0  0  0  0  0  0  0</div><div class="line"></div><div class="line">0  4  4  4  4  4  4  4  4  4</div><div class="line">0  4  8  0  0  0  0  0  0  0</div><div class="line">0  0  0  0  0  0  0  0  0  0</div><div class="line">0  0  0  0  0  0  0  0  0  0</div><div class="line"></div><div class="line">0  4  4  4  4  4  4  4  4  4</div><div class="line">0  4  8  8  0  0  0  0  0  0</div><div class="line">0  0  0  0  0  0  0  0  0  0</div><div class="line">0  0  0  0  0  0  0  0  0  0</div><div class="line"></div><div class="line">0  4  4  4  4  4  4  4  4  4</div><div class="line">0  4  8  8 12  0  0  0  0  0</div><div class="line">0  0  0  0  0  0  0  0  0  0</div><div class="line">0  0  0  0  0  0  0  0  0  0</div><div class="line"></div><div class="line">0  4  4  4  4  4  4  4  4  4</div><div class="line">0  4  8  8 12 12  0  0  0  0</div><div class="line">0  0  0  0  0  0  0  0  0  0</div><div class="line">0  0  0  0  0  0  0  0  0  0</div><div class="line"></div><div class="line">0  4  4  4  4  4  4  4  4  4</div><div class="line">0  4  8  8 12 12 12  0  0  0</div><div class="line">0  0  0  0  0  0  0  0  0  0</div><div class="line">0  0  0  0  0  0  0  0  0  0</div><div class="line"></div><div class="line">0  4  4  4  4  4  4  4  4  4</div><div class="line">0  4  8  8 12 12 12 12  0  0</div><div class="line">0  0  0  0  0  0  0  0  0  0</div><div class="line">0  0  0  0  0  0  0  0  0  0</div><div class="line"></div><div class="line">0  4  4  4  4  4  4  4  4  4</div><div class="line">0  4  8  8 12 12 12 12 12  0</div><div class="line">0  0  0  0  0  0  0  0  0  0</div><div class="line">0  0  0  0  0  0  0  0  0  0</div><div class="line"></div><div class="line">0  4  4  4  4  4  4  4  4  4</div><div class="line">0  4  8  8 12 12 12 12 12 12</div><div class="line">0  0  0  0  0  0  0  0  0  0</div><div class="line">0  0  0  0  0  0  0  0  0  0</div><div class="line"></div><div class="line">0  4  4  4  4  4  4  4  4  4</div><div class="line">0  4  8  8 12 12 12 12 12 12</div><div class="line">0  0  0  0  0  0  0  0  0  0</div><div class="line">0  0  0  0  0  0  0  0  0  0</div><div class="line"></div><div class="line">0  4  4  4  4  4  4  4  4  4</div><div class="line">0  4  8  8 12 12 12 12 12 12</div><div class="line">0  4  0  0  0  0  0  0  0  0</div><div class="line">0  0  0  0  0  0  0  0  0  0</div><div class="line"></div><div class="line">0  4  4  4  4  4  4  4  4  4</div><div class="line">0  4  8  8 12 12 12 12 12 12</div><div class="line">0  4 10  0  0  0  0  0  0  0</div><div class="line">0  0  0  0  0  0  0  0  0  0</div><div class="line"></div><div class="line">0  4  4  4  4  4  4  4  4  4</div><div class="line">0  4  8  8 12 12 12 12 12 12</div><div class="line">0  4 10 10  0  0  0  0  0  0</div><div class="line">0  0  0  0  0  0  0  0  0  0</div><div class="line"></div><div class="line">0  4  4  4  4  4  4  4  4  4</div><div class="line">0  4  8  8 12 12 12 12 12 12</div><div class="line">0  4 10 10 14  0  0  0  0  0</div><div class="line">0  0  0  0  0  0  0  0  0  0</div><div class="line"></div><div class="line">0  4  4  4  4  4  4  4  4  4</div><div class="line">0  4  8  8 12 12 12 12 12 12</div><div class="line">0  4 10 10 14 18  0  0  0  0</div><div class="line">0  0  0  0  0  0  0  0  0  0</div><div class="line"></div><div class="line">0  4  4  4  4  4  4  4  4  4</div><div class="line">0  4  8  8 12 12 12 12 12 12</div><div class="line">0  4 10 10 14 18 18  0  0  0</div><div class="line">0  0  0  0  0  0  0  0  0  0</div><div class="line"></div><div class="line">0  4  4  4  4  4  4  4  4  4</div><div class="line">0  4  8  8 12 12 12 12 12 12</div><div class="line">0  4 10 10 14 18 18 22  0  0</div><div class="line">0  0  0  0  0  0  0  0  0  0</div><div class="line"></div><div class="line">0  4  4  4  4  4  4  4  4  4</div><div class="line">0  4  8  8 12 12 12 12 12 12</div><div class="line">0  4 10 10 14 18 18 22 22  0</div><div class="line">0  0  0  0  0  0  0  0  0  0</div><div class="line"></div><div class="line">0  4  4  4  4  4  4  4  4  4</div><div class="line">0  4  8  8 12 12 12 12 12 12</div><div class="line">0  4 10 10 14 18 18 22 22 22</div><div class="line">0  0  0  0  0  0  0  0  0  0</div><div class="line"></div><div class="line">0  4  4  4  4  4  4  4  4  4</div><div class="line">0  4  8  8 12 12 12 12 12 12</div><div class="line">0  4 10 10 14 18 18 22 22 22</div><div class="line">1  0  0  0  0  0  0  0  0  0</div><div class="line"></div><div class="line">0  4  4  4  4  4  4  4  4  4</div><div class="line">0  4  8  8 12 12 12 12 12 12</div><div class="line">0  4 10 10 14 18 18 22 22 22</div><div class="line">1  4  0  0  0  0  0  0  0  0</div><div class="line"></div><div class="line">0  4  4  4  4  4  4  4  4  4</div><div class="line">0  4  8  8 12 12 12 12 12 12</div><div class="line">0  4 10 10 14 18 18 22 22 22</div><div class="line">1  4 10  0  0  0  0  0  0  0</div><div class="line"></div><div class="line">0  4  4  4  4  4  4  4  4  4</div><div class="line">0  4  8  8 12 12 12 12 12 12</div><div class="line">0  4 10 10 14 18 18 22 22 22</div><div class="line">1  4 10 11  0  0  0  0  0  0</div><div class="line"></div><div class="line">0  4  4  4  4  4  4  4  4  4</div><div class="line">0  4  8  8 12 12 12 12 12 12</div><div class="line">0  4 10 10 14 18 18 22 22 22</div><div class="line">1  4 10 11 14  0  0  0  0  0</div><div class="line"></div><div class="line">0  4  4  4  4  4  4  4  4  4</div><div class="line">0  4  8  8 12 12 12 12 12 12</div><div class="line">0  4 10 10 14 18 18 22 22 22</div><div class="line">1  4 10 11 14 18  0  0  0  0</div><div class="line"></div><div class="line">0  4  4  4  4  4  4  4  4  4</div><div class="line">0  4  8  8 12 12 12 12 12 12</div><div class="line">0  4 10 10 14 18 18 22 22 22</div><div class="line">1  4 10 11 14 18 19  0  0  0</div><div class="line"></div><div class="line">0  4  4  4  4  4  4  4  4  4</div><div class="line">0  4  8  8 12 12 12 12 12 12</div><div class="line">0  4 10 10 14 18 18 22 22 22</div><div class="line">1  4 10 11 14 18 19 22  0  0</div><div class="line"></div><div class="line">0  4  4  4  4  4  4  4  4  4</div><div class="line">0  4  8  8 12 12 12 12 12 12</div><div class="line">0  4 10 10 14 18 18 22 22 22</div><div class="line">1  4 10 11 14 18 19 22 23  0</div><div class="line"></div><div class="line">0  4  4  4  4  4  4  4  4  4</div><div class="line">0  4  8  8 12 12 12 12 12 12</div><div class="line">0  4 10 10 14 18 18 22 22 22</div><div class="line">1  4 10 11 14 18 19 22 23 23</div></pre></td></tr></table></figure></p>
<p>此种方法维护的是一张二维表<br>时间和空间复杂度均为O(N*V)<br>其中时间复杂度基本已经不能再优化了，但空间复杂度却可以优化到O(V)。</p>
<p>先考虑上面讲的基本思路如何实现，肯定是有一个主循环<code>i=1..N</code>，每次算出来二维数组<code>f[i][0..V]</code>的所有值。那么，如果只用一个数组<code>f[0..V]</code>，能不能保证第i次循环结束后<code>f[v]</code>中表示的就是我们定义的状态<code>f[i][v]</code>呢？<code>f[i][v]</code>是由<code>f[i-1][v]</code>和<code>f[i-1][v-c[i]]</code>两个子问题递推而来，能否保证在推<code>f[i][v]</code>时（也即在第i次主循环中推f[v]时）能够得到<code>f[i-1][v]</code>和f<code>[i-1][v-c[i]]</code>的值呢？事实上，这要求在每次主循环中我们以<code>v=V..0</code>的顺序推f[v]，这样才能保证推<code>f[v]</code>时<code>f[v-c[i]]</code>保存的是状态<code>f[i-1][v-c[i]]</code>的值。<br>状态转移式<code>f[v]=max{f[v],f[v-c[i]]}</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">#include&lt;stdlib.h&gt;</div><div class="line">#include&lt;stdio.h&gt;</div><div class="line">#define MAX 100</div><div class="line">#define V 10</div><div class="line">int value[MAX + 1]  = &#123;4, 8, 10, 1&#125;;</div><div class="line">int volume[MAX + 1] = &#123;2, 3,  3, 1&#125;,n = 4;</div><div class="line">int f[MAX];</div><div class="line"></div><div class="line">int max(int x,int j)&#123;</div><div class="line">    return x &gt; j ? x : j;</div><div class="line">&#125;</div><div class="line"></div><div class="line">int main()&#123;</div><div class="line">    int i,j,s;</div><div class="line">    for(i = 1;i &lt;= n;i++)&#123;</div><div class="line">        for(j = V;j &gt; 0;j--)&#123;</div><div class="line">            if(j &gt;= volume[i-1])</div><div class="line">            f[j] = max(f[j], f[ j - volume[i-1]] + value[i-1]);</div><div class="line">            printf(&quot;f[%2d]&quot;,j);</div><div class="line">            for(s = 0;s &lt; V+1 ;s++)&#123;</div><div class="line">                printf(&quot;%3d &quot;,f[s]);</div><div class="line">            &#125;</div><div class="line">            printf(&quot;\n&quot;);</div><div class="line">        &#125;</div><div class="line">        printf(&quot;\n&quot;);</div><div class="line">        printf(&quot;\n&quot;);</div><div class="line">    &#125;</div><div class="line">    return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>打印结果  很直观能看到一维表的维护过程<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line">f[10]  0   0   0   0   0   0   0   0   0   0   4</div><div class="line">f[ 9]  0   0   0   0   0   0   0   0   0   4   4</div><div class="line">f[ 8]  0   0   0   0   0   0   0   0   4   4   4</div><div class="line">f[ 7]  0   0   0   0   0   0   0   4   4   4   4</div><div class="line">f[ 6]  0   0   0   0   0   0   4   4   4   4   4</div><div class="line">f[ 5]  0   0   0   0   0   4   4   4   4   4   4</div><div class="line">f[ 4]  0   0   0   0   4   4   4   4   4   4   4</div><div class="line">f[ 3]  0   0   0   4   4   4   4   4   4   4   4</div><div class="line">f[ 2]  0   0   4   4   4   4   4   4   4   4   4</div><div class="line">f[ 1]  0   0   4   4   4   4   4   4   4   4   4</div><div class="line"></div><div class="line"></div><div class="line">f[10]  0   0   4   4   4   4   4   4   4   4  12</div><div class="line">f[ 9]  0   0   4   4   4   4   4   4   4  12  12</div><div class="line">f[ 8]  0   0   4   4   4   4   4   4  12  12  12</div><div class="line">f[ 7]  0   0   4   4   4   4   4  12  12  12  12</div><div class="line">f[ 6]  0   0   4   4   4   4  12  12  12  12  12</div><div class="line">f[ 5]  0   0   4   4   4  12  12  12  12  12  12</div><div class="line">f[ 4]  0   0   4   4   8  12  12  12  12  12  12</div><div class="line">f[ 3]  0   0   4   8   8  12  12  12  12  12  12</div><div class="line">f[ 2]  0   0   4   8   8  12  12  12  12  12  12</div><div class="line">f[ 1]  0   0   4   8   8  12  12  12  12  12  12</div><div class="line"></div><div class="line"></div><div class="line">f[10]  0   0   4   8   8  12  12  12  12  12  22</div><div class="line">f[ 9]  0   0   4   8   8  12  12  12  12  22  22</div><div class="line">f[ 8]  0   0   4   8   8  12  12  12  22  22  22</div><div class="line">f[ 7]  0   0   4   8   8  12  12  18  22  22  22</div><div class="line">f[ 6]  0   0   4   8   8  12  18  18  22  22  22</div><div class="line">f[ 5]  0   0   4   8   8  14  18  18  22  22  22</div><div class="line">f[ 4]  0   0   4   8  10  14  18  18  22  22  22</div><div class="line">f[ 3]  0   0   4  10  10  14  18  18  22  22  22</div><div class="line">f[ 2]  0   0   4  10  10  14  18  18  22  22  22</div><div class="line">f[ 1]  0   0   4  10  10  14  18  18  22  22  22</div><div class="line"></div><div class="line"></div><div class="line">f[10]  0   0   4  10  10  14  18  18  22  22  23</div><div class="line">f[ 9]  0   0   4  10  10  14  18  18  22  23  23</div><div class="line">f[ 8]  0   0   4  10  10  14  18  18  22  23  23</div><div class="line">f[ 7]  0   0   4  10  10  14  18  19  22  23  23</div><div class="line">f[ 6]  0   0   4  10  10  14  18  19  22  23  23</div><div class="line">f[ 5]  0   0   4  10  10  14  18  19  22  23  23</div><div class="line">f[ 4]  0   0   4  10  11  14  18  19  22  23  23</div><div class="line">f[ 3]  0   0   4  10  11  14  18  19  22  23  23</div><div class="line">f[ 2]  0   0   4  10  11  14  18  19  22  23  23</div><div class="line">f[ 1]  0   1   4  10  11  14  18  19  22  23  23</div></pre></td></tr></table></figure></p>
<p>从打印数量上来看 确实优化许多</p>
<p>递归方法<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">#include&lt;stdlib.h&gt;</div><div class="line">#include&lt;stdio.h&gt;</div><div class="line">#define MAX 100</div><div class="line">#define V 10</div><div class="line">int value[MAX + 1] = &#123;4, 8, 10, 5&#125;, volume[MAX + 1] = &#123;2, 3, 2, 1&#125;,n = 4;</div><div class="line">int dp[MAX + 1][MAX + 1];//记忆数组</div><div class="line">int max(int x,int j)&#123;</div><div class="line">    return x &gt; j ? x : j;</div><div class="line">&#125;</div><div class="line">int f(int i,int j)&#123;</div><div class="line">    int totlaValue = 0;</div><div class="line">    if(dp[i][j] != -1)//是否计算过了</div><div class="line">        return dp[i][j];</div><div class="line">    if(i &gt;= n)//没东西了</div><div class="line">        return 0;</div><div class="line">    if(volume[i] &gt; j)&#123;//无法装下</div><div class="line">    dp[i + 1][j] = f(i + 1,j);//记下</div><div class="line">    &#125; else &#123;</div><div class="line">        totlaValue = max(f(i + 1, j - volume[i] ) + value[i],f(i+1, j));//取最大者</div><div class="line">    &#125;</div><div class="line">    dp[i][j] = totlaValue;//记下</div><div class="line">    return totlaValue;</div><div class="line">&#125;</div><div class="line">int main()&#123;</div><div class="line">    memset(dp,-1,sizeof(dp));</div><div class="line">    printf(&quot;%d&quot; ,f(0,V));</div><div class="line">    return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<blockquote>
<p>完全背包(CompletePack): 有n物品和一个容量为V的背包，每种物品都有无限件可用。第i种物品的体积是volume[i]，价值是value[i]。求解将哪些物品装入背包可使这些物品的费用总和不超过背包容量，且价值总和最大。</p>
</blockquote>
<p><code>f[i][v]</code>表示前i种物品恰放入一个容量为v的背包的最大权值<br><code>f[i][v] = max{f[i - 1][v - k*c[i]] + k * w[i]|0 &lt;= k*c[i] &lt;= v}</code></p>
<p>既然01背包问题是最基本的背包问题，那么我们可以考虑把完全背包问题转化为01背包问题来解。最简单的想法是，考虑到第i种物品最多选<code>V/c[i]</code>件，于是可以把第<code>i</code>种物品转化为<code>V/c[i]</code>件费用及价值均不变的物品，然后求解这个01背包问题。这样完全没有改进基本思路的时间复杂度，但这毕竟给了我们将完全背包问题转化为01背包问题的思路：将一种物品拆成多件物品。<br>状态转移方程：<br><code>f[v]=max{f[v],f[v-cost]+weight}</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">#include&lt;stdlib.h&gt;</div><div class="line">#include&lt;stdio.h&gt;</div><div class="line">#define MAX 100</div><div class="line">#define V 10</div><div class="line">int value[MAX + 1]  = &#123;4, 8, 10, 1&#125;;</div><div class="line">int volume[MAX + 1] = &#123;2, 3,  3, 1&#125;,n = 4;</div><div class="line">int f[V];</div><div class="line"></div><div class="line">int max(int x,int j)&#123;</div><div class="line">    return x &gt; j ? x : j;</div><div class="line">&#125;</div><div class="line"></div><div class="line">int main()&#123;</div><div class="line">        int i,j,l,s;</div><div class="line">    f[0] = 0;</div><div class="line">    for(i = 0;i &lt;= n;i++)&#123;</div><div class="line">        for(j = 0;j &lt;= V;j++)&#123;</div><div class="line">            if(j &gt;= volume[i])&#123;</div><div class="line"></div><div class="line">            f[j] = max(f[j], f[j - volume[i]] + value[i]);</div><div class="line">            &#125;</div><div class="line">            printf(&quot;f[%2d]&quot;,j);</div><div class="line"></div><div class="line">            for(s = 0;s &lt; V+1 ;s++)&#123;</div><div class="line">                printf(&quot;%3d &quot;,f[s]);</div><div class="line">            &#125;</div><div class="line">            printf(&quot;\n&quot;);</div><div class="line">        &#125;</div><div class="line">         printf(&quot;\n&quot;);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div></pre></td><td class="code"><pre><div class="line">f[ 0]  0   0   0   0   0   0   0   0   0   0   0</div><div class="line">f[ 1]  0   0   0   0   0   0   0   0   0   0   0</div><div class="line">f[ 2]  0   0   4   0   0   0   0   0   0   0   0</div><div class="line">f[ 3]  0   0   4   4   0   0   0   0   0   0   0</div><div class="line">f[ 4]  0   0   4   4   8   0   0   0   0   0   0</div><div class="line">f[ 5]  0   0   4   4   8   8   0   0   0   0   0</div><div class="line">f[ 6]  0   0   4   4   8   8  12   0   0   0   0</div><div class="line">f[ 7]  0   0   4   4   8   8  12  12   0   0   0</div><div class="line">f[ 8]  0   0   4   4   8   8  12  12  16   0   0</div><div class="line">f[ 9]  0   0   4   4   8   8  12  12  16  16   0</div><div class="line">f[10]  0   0   4   4   8   8  12  12  16  16  20</div><div class="line"></div><div class="line">f[ 0]  0   0   4   4   8   8  12  12  16  16  20</div><div class="line">f[ 1]  0   0   4   4   8   8  12  12  16  16  20</div><div class="line">f[ 2]  0   0   4   4   8   8  12  12  16  16  20</div><div class="line">f[ 3]  0   0   4   8   8   8  12  12  16  16  20</div><div class="line">f[ 4]  0   0   4   8   8   8  12  12  16  16  20</div><div class="line">f[ 5]  0   0   4   8   8  12  12  12  16  16  20</div><div class="line">f[ 6]  0   0   4   8   8  12  16  12  16  16  20</div><div class="line">f[ 7]  0   0   4   8   8  12  16  16  16  16  20</div><div class="line">f[ 8]  0   0   4   8   8  12  16  16  20  16  20</div><div class="line">f[ 9]  0   0   4   8   8  12  16  16  20  24  20</div><div class="line">f[10]  0   0   4   8   8  12  16  16  20  24  24</div><div class="line"></div><div class="line">f[ 0]  0   0   4   8   8  12  16  16  20  24  24</div><div class="line">f[ 1]  0   0   4   8   8  12  16  16  20  24  24</div><div class="line">f[ 2]  0   0   4   8   8  12  16  16  20  24  24</div><div class="line">f[ 3]  0   0   4  10   8  12  16  16  20  24  24</div><div class="line">f[ 4]  0   0   4  10  10  12  16  16  20  24  24</div><div class="line">f[ 5]  0   0   4  10  10  14  16  16  20  24  24</div><div class="line">f[ 6]  0   0   4  10  10  14  20  16  20  24  24</div><div class="line">f[ 7]  0   0   4  10  10  14  20  20  20  24  24</div><div class="line">f[ 8]  0   0   4  10  10  14  20  20  24  24  24</div><div class="line">f[ 9]  0   0   4  10  10  14  20  20  24  30  24</div><div class="line">f[10]  0   0   4  10  10  14  20  20  24  30  30</div><div class="line"></div><div class="line">f[ 0]  0   0   4  10  10  14  20  20  24  30  30</div><div class="line">f[ 1]  0   1   4  10  10  14  20  20  24  30  30</div><div class="line">f[ 2]  0   1   4  10  10  14  20  20  24  30  30</div><div class="line">f[ 3]  0   1   4  10  10  14  20  20  24  30  30</div><div class="line">f[ 4]  0   1   4  10  11  14  20  20  24  30  30</div><div class="line">f[ 5]  0   1   4  10  11  14  20  20  24  30  30</div><div class="line">f[ 6]  0   1   4  10  11  14  20  20  24  30  30</div><div class="line">f[ 7]  0   1   4  10  11  14  20  21  24  30  30</div><div class="line">f[ 8]  0   1   4  10  11  14  20  21  24  30  30</div><div class="line">f[ 9]  0   1   4  10  11  14  20  21  24  30  30</div><div class="line">f[10]  0   1   4  10  11  14  20  21  24  30  31</div><div class="line"></div><div class="line">f[ 0]  0   1   4  10  11  14  20  21  24  30  31</div><div class="line">f[ 1]  0   1   4  10  11  14  20  21  24  30  31</div><div class="line">f[ 2]  0   1   4  10  11  14  20  21  24  30  31</div><div class="line">f[ 3]  0   1   4  10  11  14  20  21  24  30  31</div><div class="line">f[ 4]  0   1   4  10  11  14  20  21  24  30  31</div><div class="line">f[ 5]  0   1   4  10  11  14  20  21  24  30  31</div><div class="line">f[ 6]  0   1   4  10  11  14  20  21  24  30  31</div><div class="line">f[ 7]  0   1   4  10  11  14  20  21  24  30  31</div><div class="line">f[ 8]  0   1   4  10  11  14  20  21  24  30  31</div><div class="line">f[ 9]  0   1   4  10  11  14  20  21  24  30  31</div><div class="line">f[10]  0   1   4  10  11  14  20  21  24  30  31</div></pre></td></tr></table></figure>
<blockquote>
<p>多重背包(MultiplePack): 有N种物品和一个容量为V的背包。第i种物品最多有n[i]件可用，每件费用是c[i]，价值是w[i]。求解将哪些物品装入背包可使这些物品的费用总和不超过背包容量，且价值总和最大。</p>
</blockquote>

 
                <!-- Meta -->
                <div class="post-meta">
                    <hr>
                    <br>
                    <div class="post-tags">
                        
                    </div>
                    <div class="post-date">
                        2017 年 09 月 12 日
                    </div>
                </div>
            </div>

            <!-- Comments -->
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <!-- Disqus Comments -->


            </div>
        </div>
    </div>
</article>
</section>

    <!-- Scripts -->
    <!-- jQuery -->
<script src="//cdn.bootcss.com/jquery/2.2.1/jquery.min.js"></script>
<!-- Bootstrap -->
<script src="//cdn.bootcss.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

<script type="text/javascript">
	console.log('Hexo-theme-hollow designed by zchen9 🙋 © 2015-' + (new Date()).getFullYear());
</script>

    <!-- Google Analytics -->
    

</body>

</html>